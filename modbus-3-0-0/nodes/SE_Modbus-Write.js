var _0x1780=['success','Data\x20Written\x20Successfully','\x20::Data\x20Written\x20Successfully','statlyMachine','getMachineState','INIT','message','Timed\x20out','Port\x20Not\x20Open','FSM\x20Reset\x20On\x20State\x20INIT','FSM\x20Reset\x20On\x20State\x20QUEUEING','FSM\x20Reset\x20On\x20State\x20EMPTY','Device\x20is\x20not\x20connected','emit','reconnect','COM\x20Port\x20in\x20use','COM\x20Port\x20is\x20already\x20opened','Illegal\x20Function\x20Code','Write\x20Error','Illegal\x20Data\x20Address','Modbus\x20exception\x203','Slave\x20Device\x20Failure','FSM\x20Not\x20Ready\x20To\x20Write','registerType','SE_Modbus-Write','nodes','createNode','../src/logging','init_var','timeoutID','getNode','registerForModbus','clienttype','tcp','name','toUpperCase','tcpHost','setNodeStatusTo','connecting','configError','onModbusInit','connected','logInfo','\x20:NODE\x20ID::','\x20::connected','onModbusError','disconnected','mbinit','mbconnected','mbclosed','onModbusClose','validateConfigInput','quantity','Config\x20Error:\x20Please\x20enter\x20valid\x20address,\x20should\x20be\x200\x20to\x2065535','send','Config\x20Error:\x20Please\x20enter\x20valid\x20quantity,\x20should\x20be\x201\x20to\x2065535','input','hasOwnProperty','client','payload','error','validatePayloadType','adr','functionCodeModbus','writeModbus','onModbusWriteDone','onModbusWriteError','Input\x20Error:\x20Wrong\x20input\x20format','number','filter','isEnabled','map','concat','BOOLEAN','getConvertedData','type','validateInputType','Invalid\x20input','push','Invalid\x20Function\x20Code','onModbusFlexWriteDone','logError','NODE\x20Name::',':NODE\x20ID::','msg'];(function(_0x114e29,_0x2c8eae){var _0x53a547=function(_0x3604b4){while(--_0x3604b4){_0x114e29['push'](_0x114e29['shift']());}};_0x53a547(++_0x2c8eae);}(_0x1780,0x16d));var _0x1732=function(_0x364175,_0x372688){_0x364175=_0x364175-0x0;var _0x3860cd=_0x1780[_0x364175];return _0x3860cd;};module['exports']=function(_0x3bb53f){function _0x4b7efe(_0x5af631){_0x3bb53f[_0x1732('0x0')][_0x1732('0x1')](this,_0x5af631);const _0x26aa5b=this;const _0x4e3427=require(_0x1732('0x2'));const _0x3c5abc=require('../src/writeconfig');_0x3c5abc[_0x1732('0x3')](_0x26aa5b,_0x5af631,_0x4e3427);_0x26aa5b[_0x1732('0x4')]=null;const _0x44adc1=function(){_0x26aa5b[_0x1732('0x4')]=setTimeout(_0x1e82da,0xbb8);};const _0x4b509d=function(){if(_0x26aa5b[_0x1732('0x4')]){clearTimeout(_0x26aa5b[_0x1732('0x4')]);}_0x26aa5b['timeoutID']=null;};const _0x1cbe7e=_0x3bb53f[_0x1732('0x0')][_0x1732('0x5')](_0x5af631['server']);let _0x3d2aad='';if(_0x1cbe7e){_0x1cbe7e[_0x1732('0x6')](_0x26aa5b);if(_0x1cbe7e[_0x1732('0x7')]===_0x1732('0x8')){_0x3d2aad=''+_0x1cbe7e[_0x1732('0x9')]+_0x1cbe7e[_0x1732('0x7')][_0x1732('0xa')]()+'@'+_0x1cbe7e[_0x1732('0xb')];}else{_0x3d2aad=''+_0x1cbe7e[_0x1732('0x9')]+_0x1cbe7e[_0x1732('0x7')][_0x1732('0xa')]()+'@'+_0x1cbe7e['unit_id'];}_0x3c5abc[_0x1732('0xc')](_0x1732('0xd'),_0x26aa5b);}else{_0x3c5abc[_0x1732('0xc')](_0x1732('0xe'),_0x26aa5b);return;}_0x26aa5b[_0x1732('0xf')]=function(){_0x3c5abc[_0x1732('0xc')](_0x1732('0xd'),_0x26aa5b);};_0x26aa5b['onModbusConnect']=function(){_0x3c5abc['setNodeStatusTo'](_0x1732('0x10'),_0x26aa5b);_0x4e3427[_0x1732('0x11')]('NODE\x20Name::'+_0x26aa5b[_0x1732('0x9')]+_0x1732('0x12')+_0x26aa5b['id']+_0x1732('0x13'),_0x26aa5b);};_0x26aa5b[_0x1732('0x14')]=function(_0x34e151){_0x539114({'message':_0x34e151});};_0x26aa5b['onModbusClose']=function(){_0x3c5abc[_0x1732('0xc')](_0x1732('0x15'),_0x26aa5b);};_0x1cbe7e['on'](_0x1732('0x16'),_0x26aa5b[_0x1732('0xf')]);_0x1cbe7e['on'](_0x1732('0x17'),_0x26aa5b['onModbusConnect']);_0x1cbe7e['on']('mberror',_0x26aa5b[_0x1732('0x14')]);_0x1cbe7e['on'](_0x1732('0x18'),_0x26aa5b[_0x1732('0x19')]);const _0x333b01=_0x3c5abc[_0x1732('0x1a')](_0x26aa5b['adr'],0x0,0xffff);const _0x1c76b2=_0x3c5abc[_0x1732('0x1a')](_0x26aa5b[_0x1732('0x1b')],0x1,0xffff);if(!_0x333b01){_0x26aa5b['send'](_0x457d81({'msg':_0x1732('0x1c'),'status':_0x1732('0xe'),'reset':!![]}));return;}else if(!_0x1c76b2){_0x26aa5b[_0x1732('0x1d')](_0x457d81({'msg':_0x1732('0x1e'),'status':'configError','reset':!![]}));return;}else{}_0x26aa5b['on'](_0x1732('0x1f'),function(_0x1cba89){if(!(_0x1cba89&&_0x1cba89[_0x1732('0x20')]('payload'))||!_0x1cbe7e[_0x1732('0x21')]){return;}if(_0x1cba89[_0x1732('0x22')]===null){_0x26aa5b[_0x1732('0x1d')](_0x457d81({'msg':'Invalid\x20msg.payload','status':_0x1732('0x23'),'reset':!![]}));return;}if(_0x3c5abc[_0x1732('0x24')](_0x1cba89[_0x1732('0x22')])){const _0x4af030=_0x3c5abc['validateConfigInput'](_0x26aa5b[_0x1732('0x25')],0x0,0xffff);const _0x2ea11d=_0x3c5abc['validateConfigInput'](_0x26aa5b['quantity'],0x1,0xffff);const _0x4db2ad=_0x3c5abc[_0x1732('0x26')](_0x26aa5b['dataType']);if(!_0x4af030){_0x26aa5b[_0x1732('0x1d')](_0x457d81({'msg':'Config\x20Error:\x20Please\x20enter\x20valid\x20address,\x20should\x20be\x200\x20to\x2065535','status':_0x1732('0xe'),'reset':!![]}));return;}else if(!_0x2ea11d){_0x26aa5b[_0x1732('0x1d')](_0x457d81({'msg':_0x1732('0x1e'),'status':_0x1732('0xe'),'reset':!![]}));return;}else{try{const _0x9a79a0=_0x4fb540(_0x1cba89[_0x1732('0x22')],_0x4db2ad,_0x26aa5b[_0x1732('0x25')],_0x26aa5b[_0x1732('0x1b')]);_0x1cbe7e['emit'](_0x1732('0x27'),_0x9a79a0,_0x26aa5b[_0x1732('0x28')],_0x26aa5b[_0x1732('0x29')]);}catch(_0x2676c3){_0x26aa5b[_0x1732('0x1d')](_0x457d81({'msg':_0x2676c3['message'],'status':_0x1732('0x23'),'reset':!![]}));}return;}}else{_0x26aa5b['send'](_0x457d81({'msg':_0x1732('0x2a'),'status':_0x1732('0x23'),'reset':!![]}));}});function _0xdad128(_0xba0c93){return _0xba0c93===0x5||_0xba0c93===0xf;}function _0x4fb540(_0x4b2563,_0x2d02d7,_0x2adefa,_0x25fe64){const _0x1500ae=JSON['parse'](_0x26aa5b['alltags']);let _0x2b2ae9=[];if(_0x25fe64>0x1){if(typeof _0x4b2563===_0x1732('0x2b')){_0x4b2563=[_0x4b2563];}const _0x23c609=_0x1500ae[_0x1732('0x2c')](_0x2f5eee=>_0x2f5eee[_0x1732('0x2d')]===!![]);if(_0xdad128(_0x2d02d7)){_0x23c609[_0x1732('0x2e')](function(_0x928ebe,_0x5353e3){_0x2b2ae9=_0x2b2ae9[_0x1732('0x2f')](_0x3c5abc['getConvertedData'](_0x4b2563[_0x5353e3],_0x1732('0x30')));});}else{_0x23c609[_0x1732('0x2e')](function(_0x5111e6,_0x46e09d){_0x2b2ae9=_0x2b2ae9[_0x1732('0x2f')](_0x3c5abc[_0x1732('0x31')](_0x4b2563[_0x46e09d],_0x5111e6[_0x1732('0x32')]));});}}else{if(_0x2d02d7===0x5){_0x2b2ae9=_0x3c5abc[_0x1732('0x31')](_0x4b2563,_0x1732('0x30'));}else if(_0x2d02d7===0xf){_0x2b2ae9['push'](_0x3c5abc[_0x1732('0x31')](_0x4b2563,_0x1732('0x30')));}else if(_0x2d02d7===0x6){if(_0x3c5abc[_0x1732('0x33')](_0x4b2563)){_0x2b2ae9=_0x3c5abc[_0x1732('0x31')](_0x4b2563,_0x1500ae[0x0][_0x1732('0x32')]);}else{throw Error(_0x1732('0x34'));}}else if(_0x2d02d7===0x10){if(_0x3c5abc[_0x1732('0x33')](_0x4b2563)){_0x2b2ae9[_0x1732('0x35')](_0x3c5abc[_0x1732('0x31')](_0x4b2563,_0x1500ae[0x0][_0x1732('0x32')]));}else{throw Error('Invalid\x20input');}}else{throw Error(_0x1732('0x36'));}}return{'topic':_0x26aa5b['id'],'payload':{'value':_0x2b2ae9,'fc':_0x2d02d7,'address':_0x2adefa,'quantity':_0x25fe64}};}_0x26aa5b[_0x1732('0x28')]=function(){_0x3bc910();};_0x26aa5b[_0x1732('0x37')]=function(){_0x3bc910();};_0x26aa5b['onModbusWriteError']=function(_0x313e06){_0x44adc1();_0x2b73cf(_0x313e06);};_0x26aa5b['on']('close',function(){_0x3c5abc['setNodeStatusTo'](_0x1732('0x15'),_0x26aa5b);});function _0x457d81(_0x44ac60){_0x3c5abc[_0x1732('0xc')](_0x44ac60['status'],_0x26aa5b);if(_0x44ac60['reset']){_0x44adc1();}else{_0x4b509d();}_0x4e3427[_0x1732('0x38')](_0x1732('0x39')+_0x26aa5b[_0x1732('0x9')]+_0x1732('0x3a')+_0x26aa5b['id']+'::'+_0x44ac60[_0x1732('0x3b')],_0x26aa5b);const _0x17fcf3={'name':_0x26aa5b[_0x1732('0x9')],'id':_0x3d2aad,'timestamp':new Date(),'error':{'msg':_0x44ac60['msg']}};return[{'payload':_0x17fcf3}];}function _0x3bc910(){_0x3c5abc[_0x1732('0xc')](_0x1732('0x3c'),_0x26aa5b);_0x26aa5b['send']([{'payload':{'name':_0x26aa5b[_0x1732('0x9')],'id':_0x3d2aad,'timestamp':new Date(),'data':{'msg':_0x1732('0x3d')}}}]);_0x4e3427['logInfo'](_0x1732('0x39')+_0x26aa5b[_0x1732('0x9')]+':NODE\x20ID::'+_0x26aa5b['id']+_0x1732('0x3e'),_0x26aa5b);_0x44adc1();}function _0x1e82da(){const _0x3164ad=_0x1cbe7e[_0x1732('0x3f')][_0x1732('0x40')]();if(_0x3164ad===_0x1732('0x41')){_0x3c5abc[_0x1732('0xc')](_0x1732('0xd'),_0x26aa5b);}else{_0x3c5abc[_0x1732('0xc')](_0x1732('0x10'),_0x26aa5b);}_0x4b509d();}function _0x539114(_0x9ef574){switch(_0x9ef574[_0x1732('0x42')]||_0x9ef574){case _0x1732('0x43'):case _0x1732('0x44'):case _0x1732('0x45'):case _0x1732('0x46'):case _0x1732('0x47'):_0x26aa5b[_0x1732('0x1d')](_0x457d81({'msg':_0x1732('0x48'),'status':_0x1732('0x15'),'reset':![]}));_0x1cbe7e[_0x1732('0x49')](_0x1732('0x4a'));break;case _0x1732('0x4b'):_0x26aa5b[_0x1732('0x1d')](_0x457d81({'msg':_0x1732('0x4c'),'status':'error','reset':![]}));_0x1cbe7e[_0x1732('0x49')](_0x1732('0x4a'));break;default:_0x26aa5b[_0x1732('0x1d')](_0x457d81({'msg':_0x9ef574[_0x1732('0x42')]||_0x9ef574,'status':'error','reset':!![]}));}}function _0x2b73cf(_0x1cee42){switch(_0x1cee42[_0x1732('0x42')]||_0x1cee42){case'Modbus\x20exception\x201':_0x26aa5b[_0x1732('0x1d')](_0x457d81({'msg':_0x1732('0x4d'),'status':_0x1732('0x4e'),'reset':!![]}));break;case'Modbus\x20exception\x202':_0x26aa5b[_0x1732('0x1d')](_0x457d81({'msg':_0x1732('0x4f'),'status':'Write\x20Error','reset':!![]}));break;case _0x1732('0x50'):_0x26aa5b[_0x1732('0x1d')](_0x457d81({'msg':'Illegal\x20Data\x20Value','status':_0x1732('0x4e'),'reset':!![]}));break;case'Modbus\x20exception\x204':_0x26aa5b[_0x1732('0x1d')](_0x457d81({'msg':_0x1732('0x51'),'status':_0x1732('0x23'),'reset':!![]}));break;case _0x1732('0x52'):_0x26aa5b[_0x1732('0x1d')](_0x457d81({'msg':_0x1732('0x52'),'status':'Write\x20Error','reset':!![]}));break;default:_0x26aa5b[_0x1732('0x1d')](_0x457d81({'msg':_0x1cee42[_0x1732('0x42')]||_0x1cee42,'status':_0x1732('0x23'),'reset':!![]}));}}}_0x3bb53f[_0x1732('0x0')][_0x1732('0x53')](_0x1732('0x54'),_0x4b7efe);};