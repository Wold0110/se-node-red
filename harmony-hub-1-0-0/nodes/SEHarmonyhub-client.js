const _0x4f43=['readModbus','set','list','serialport','client','verbose','onModbusClose','serialConnectionDelay','push\x20to\x20Queue\x20by\x20Unit-Id','stringify','init','mbinit','connection\x20closed','initQueue','tcpType','queueUnitId','internalDebug','connectRTUBuffered','break','isFirstInitOfConnection','nodes','RTU','unit_id','includes','serialPort','read','queueUnit','SEHarmonyHub-Client','OPENED','modbusErrorHandling','serverInfo','shift','modbus\x20connection\x20opened','write\x20msg','time\x20to\x20open\x20Unit\x20','auth','queue','catch','statlyMachine','writeCoil','mbqueue','queue\x20check','getQueueNumber','empty','warn','serialDatabits','bit/s','errno','connectClient','read\x20msg','readHoldingRegisters','connectTCP','serialParity','sequentialDequeueCommand','wrong\x20unit-id\x20serial\x20(1..247)','\x20Addr:\x20','push\x20to\x20Queue\x20by\x20default\x20Unit-Id','exports','TPC-RTU-BUFFERED','wrong\x20state\x20on\x20connect\x20serial\x20','queueNumber','length','bufferCommandList','queue\x20response\x20activate\x20sending','dequeueCommand','connectTcpRTUBuffered','failure','mberror','setID','serial.read','openserial','updateServerinfo','sendAllowed','\x20Q:\x20','reconnectTimeout','createStatelyMachine','onFAILED','writeRegisters','activateSending','checkQueuesAreEmpty','serialStopbits','setMaxListeners','serial\x20sending\x20and\x20wait','tcpHost','settings','quantity','COM\x20Port\x20in\x20use','Client\x20->\x20','modbusSerialDebug','bufferCommands','checkUnitId','Device\x20Not\x20Ready\x20To\x20Read','setTCPConnectionOptions','onCLOSED','setTimeout','clientTimeout','error','Function\x20Code\x20Unknown\x20%s','\x20TCP@','modbus\x20closed\x20port','modbus\x20connection\x20not\x20opened\x20state\x20is\x20%s','setSerialConnectionOptions','Function\x20Code\x20Unknown','onCONNECTED','message','modbus\x20tcp\x20connected\x20on\x20','readCoils','pushToQueueByUnitId','unitid','writeCoils','then','commandDelay','httpAdmin','tcpPort','dequeue\x20command\x20disallowed\x20state','address','onINIT','initialized','get','./core/modbus-client-core','connect','registerType','reconnect','_port','onQUEUEING','isInteger','writeModbus','unitSendingAllowed','openSerialClient','\x20default\x20Unit-Id:\x20','activate','messagesAllowedStates','getMachineState','tcp','setUnitIdFromPayload','push','queue\x20write\x20msg','messageAllowedStates','\x20Serial@','cbkey','json','client\x20connection\x20error','emit','wrong\x20unit-id\x20(0..255)','serialBaudrate','payload','needsPermission','isNaN','clienttype','queue\x20read\x20msg','onACTIVATED','serialType','indexOf','close','clear','value','getTimeout','Access\x20denied'];(function(_0x2efbbf,_0x327a99){const _0x2d43b6=function(_0x25eb89){while(--_0x25eb89){_0x2efbbf['push'](_0x2efbbf['shift']());}};_0x2d43b6(++_0x327a99);}(_0x4f43,0x64));const _0x2da6=function(_0x2efbbf,_0x327a99){_0x2efbbf=_0x2efbbf-0x0;let _0x2d43b6=_0x4f43[_0x2efbbf];return _0x2d43b6;};module[_0x2da6('0x73')]=function(_0x26c7f7){const _0x1700d0=require(_0x2da6('0x13'));function _0x5cf714(_0x1571cb){_0x26c7f7[_0x2da6('0x4e')]['createNode'](this,_0x1571cb);const _0x1fc525=require('modbus-serial');const _0x4affb6=0x0;const _0x2cef47=0x1;const _0x56a784=0x1;const _0x5bebbf=0x1f4;const _0x3e44b7=0x3e8;const _0x5be71c=0x7d0;this[_0x2da6('0x30')]=_0x1571cb[_0x2da6('0x30')];this['bufferCommands']=_0x1571cb[_0x2da6('0x93')];this[_0x2da6('0x8d')]=_0x1571cb[_0x2da6('0x8d')];this[_0x2da6('0xd')]=parseInt(_0x1571cb[_0x2da6('0xd')],0xa)||0x1f6;this[_0x2da6('0x48')]=_0x1571cb[_0x2da6('0x48')];this[_0x2da6('0x52')]=_0x1571cb[_0x2da6('0x52')];this[_0x2da6('0x2c')]=_0x1571cb[_0x2da6('0x2c')];this[_0x2da6('0x67')]=_0x1571cb[_0x2da6('0x67')];this[_0x2da6('0x8a')]=_0x1571cb['serialStopbits'];this[_0x2da6('0x6e')]=_0x1571cb[_0x2da6('0x6e')];this['serialType']=_0x1571cb['serialType'];this[_0x2da6('0x41')]=parseInt(_0x1571cb['serialConnectionDelay'],0xa)||_0x5bebbf;this[_0x2da6('0x50')]=parseInt(_0x1571cb['unit_id'],0xa)||_0x56a784;this[_0x2da6('0xb')]=parseInt(_0x1571cb[_0x2da6('0xb')],0xa)||_0x2cef47;this['clientTimeout']=parseInt(_0x1571cb[_0x2da6('0x99')],0xa)||_0x3e44b7;this[_0x2da6('0x84')]=parseInt(_0x1571cb[_0x2da6('0x84')],0xa)||_0x5be71c;const _0xab342b=this;_0xab342b[_0x2da6('0x58')]='';_0xab342b[_0x2da6('0x4d')]=!![];_0xab342b[_0x2da6('0x3e')]=null;_0xab342b[_0x2da6('0x78')]=new Map();_0xab342b['sendAllowed']=new Map();_0xab342b[_0x2da6('0x1b')]=[];_0xab342b['messageAllowedStates']=_0x1700d0[_0x2da6('0x1f')];_0xab342b[_0x2da6('0x60')]=null;_0xab342b[_0x2da6('0x60')]=_0x1700d0[_0x2da6('0x85')]();_0xab342b[_0x2da6('0x47')]=function(){_0xab342b[_0x2da6('0x78')][_0x2da6('0x36')]();_0xab342b[_0x2da6('0x82')]['clear']();_0xab342b[_0x2da6('0x1b')]=[];for(let _0x354fb4=0x0;_0x354fb4<=0xff;_0x354fb4++){_0xab342b[_0x2da6('0x78')][_0x2da6('0x3b')](_0x354fb4,[]);_0xab342b[_0x2da6('0x82')]['set'](_0x354fb4,!![]);}};_0xab342b[_0x2da6('0x94')]=function(_0x1ad96d){if(_0xab342b[_0x2da6('0x30')]===_0x2da6('0x21')){return _0x1ad96d>=0x0&&_0x1ad96d<=0xff;}else{return _0x1ad96d>=0x1&&_0x1ad96d<=0xf7;}};_0xab342b[_0x2da6('0x22')]=function(_0x574e58){const _0x3e3c88=parseInt(_0x574e58[_0x2da6('0x2d')][_0x2da6('0x8')],0xa);if(Number[_0x2da6('0x19')](_0x3e3c88)){_0xab342b[_0x2da6('0x3e')][_0x2da6('0x7e')](_0x3e3c88);_0x574e58['queueUnitId']=_0x3e3c88;}else{if(!_0xab342b['checkUnitId'](_0xab342b[_0x2da6('0x50')])){_0xab342b[_0x2da6('0x50')]=_0x56a784;}_0xab342b[_0x2da6('0x3e')][_0x2da6('0x7e')](_0xab342b['unit_id']);_0x574e58[_0x2da6('0x49')]=_0xab342b['unit_id'];}};if(Number[_0x2da6('0x2f')](_0xab342b['unit_id'])||!_0xab342b['checkUnitId'](_0xab342b[_0x2da6('0x50')])){_0xab342b[_0x2da6('0x50')]=_0x56a784;}const _0x2ee48f=function(_0x9d9180,_0x50e092,_0xc9d12d){if(_0x9d9180){_0xab342b['sendAllowed'][_0x2da6('0x3b')](_0x50e092,![]);_0x459520(JSON[_0x2da6('0x43')]({'type':_0x2da6('0x8c'),'unitid':_0x50e092,'commandData':_0x9d9180,'queueLength':_0xab342b[_0x2da6('0x78')][_0x2da6('0x12')](_0x50e092)[_0x2da6('0x77')],'sendAllowedForNext':_0xab342b[_0x2da6('0x82')][_0x2da6('0x12')](_0x50e092),'delay':_0xab342b[_0x2da6('0xb')]}));if(_0xab342b[_0x2da6('0x78')][_0x2da6('0x12')](_0x50e092)[_0x2da6('0x77')]>0x0){_0xab342b[_0x2da6('0x1b')]['push'](_0x50e092);}_0xc9d12d=![];_0x9d9180['callModbuskey'](_0x9d9180[_0x2da6('0x4')],_0x9d9180[_0x2da6('0x27')],_0x9d9180['cberrkey']);}return _0xc9d12d;};_0xab342b[_0x2da6('0x6f')]=function(){let _0x2e9f85=null;let _0x20cb1b=!![];const _0x297be9=parseInt(_0xab342b['unitSendingAllowed'][_0x2da6('0x59')](),0xa);if(Number[_0x2da6('0x19')](_0x297be9)&&_0xab342b[_0x2da6('0x78')]['get'](_0x297be9)[_0x2da6('0x77')]>0x0){_0x459520(JSON['stringify']({'type':_0x2da6('0x63'),'unitid':_0x297be9,'sendAllowed':_0xab342b[_0x2da6('0x82')]['get'](_0x297be9),'queueLength':_0xab342b['bufferCommandList'][_0x2da6('0x12')](_0x297be9)[_0x2da6('0x77')]}));if(_0xab342b[_0x2da6('0x82')][_0x2da6('0x12')](_0x297be9)){_0x2e9f85=_0xab342b[_0x2da6('0x78')][_0x2da6('0x12')](_0x297be9)['shift']();_0x20cb1b=_0x2ee48f(_0x2e9f85,_0x297be9,_0x20cb1b);}}else{_0x459520(JSON[_0x2da6('0x43')]({'type':'queue\x20check\x20is\x20not\x20a\x20unit','unitid':_0x297be9}));}if(_0x20cb1b){_0xab342b['statlyMachine']['empty']();}};_0xab342b['dequeueCommand']=function(){const _0x3795b6=_0xab342b[_0x2da6('0x60')][_0x2da6('0x20')]();if(_0xab342b[_0x2da6('0x25')][_0x2da6('0x34')](_0x3795b6)===-0x1){_0x459520(JSON[_0x2da6('0x43')]({'state':_0x3795b6,'message':_0x2da6('0xe'),'delay':_0xab342b['commandDelay']}));}else{_0x459520(JSON[_0x2da6('0x43')]({'state':_0x3795b6,'message':'dequeue\x20command\x20'+_0xab342b['clienttype'],'delay':_0xab342b[_0x2da6('0xb')]}));_0xab342b[_0x2da6('0x6f')]();}if(_0xab342b[_0x2da6('0x89')]()){_0xab342b[_0x2da6('0x60')][_0x2da6('0x65')]();}};_0xab342b[_0x2da6('0x89')]=function(){let _0x2bd249=!![];for(let _0x4e4f26=0x0;_0x4e4f26<=0xff;_0x4e4f26++){_0x2bd249&=_0xab342b[_0x2da6('0x78')]['get'](_0x4e4f26)[_0x2da6('0x77')]>0x0;}return _0x2bd249;};_0xab342b['updateServerinfo']=function(){if(_0xab342b[_0x2da6('0x30')]===_0x2da6('0x21')){_0xab342b[_0x2da6('0x58')]=_0x2da6('0x9c')+_0xab342b['tcpHost']+':'+_0xab342b['tcpPort'];}else{_0xab342b[_0x2da6('0x58')]=_0x2da6('0x26')+_0xab342b['serialPort']+':'+_0xab342b[_0x2da6('0x2c')]+_0x2da6('0x68');}_0xab342b[_0x2da6('0x58')]+=_0x2da6('0x1d')+_0xab342b[_0x2da6('0x50')];};function _0x5232b3(_0xb87a68){if(_0x26c7f7[_0x2da6('0x8e')][_0x2da6('0x3f')]){_0xab342b[_0x2da6('0x66')](_0x2da6('0x91')+_0xb87a68+_0xab342b[_0x2da6('0x58')]);}}function _0x5728c4(_0x3b63aa){if(_0x26c7f7[_0x2da6('0x8e')]['verbose']){_0x1700d0[_0x2da6('0x4a')](_0x2da6('0x91')+_0x3b63aa+_0xab342b['serverInfo']);}}function _0x459520(_0x4582c1){if(_0xab342b[_0x2da6('0x93')]==='1'){_0x5728c4(_0x4582c1);}}_0xab342b[_0x2da6('0x60')][_0x2da6('0x10')]=function(){_0xab342b[_0x2da6('0x81')]();_0xab342b[_0x2da6('0x47')]();try{if(_0xab342b[_0x2da6('0x4d')]){_0xab342b['isFirstInitOfConnection']=![];setTimeout(_0xab342b[_0x2da6('0x6a')],_0x5bebbf);}else{setTimeout(_0xab342b[_0x2da6('0x6a')],_0xab342b['reconnectTimeout']);}}catch(_0x512647){_0xab342b[_0x2da6('0x9a')](_0x512647,{'payload':_0x2da6('0x29')});}_0xab342b[_0x2da6('0x2a')](_0x2da6('0x45'));};_0xab342b[_0x2da6('0x60')][_0x2da6('0x3')]=function(){_0xab342b[_0x2da6('0x2a')]('mbconnected');_0xab342b[_0x2da6('0x60')][_0x2da6('0x1e')]();};_0xab342b[_0x2da6('0x60')][_0x2da6('0x32')]=function(){_0xab342b['emit']('mbactive');if(_0xab342b['bufferCommands']==='1'){_0xab342b[_0x2da6('0x60')][_0x2da6('0x5e')]();}};_0xab342b[_0x2da6('0x60')][_0x2da6('0x18')]=function(){setTimeout(_0xab342b[_0x2da6('0x7a')],_0xab342b[_0x2da6('0xb')]);_0xab342b[_0x2da6('0x2a')](_0x2da6('0x62'));};_0xab342b[_0x2da6('0x60')]['onOPENED']=function(){_0xab342b[_0x2da6('0x2a')]('mbopen');};_0xab342b['statlyMachine'][_0x2da6('0x97')]=function(){_0xab342b['emit']('mbclosed','Device\x20Disconnected');_0xab342b[_0x2da6('0x60')]['break']();};_0xab342b['statlyMachine'][_0x2da6('0x86')]=function(){_0xab342b[_0x2da6('0x2a')](_0x2da6('0x7d'));_0xab342b[_0x2da6('0x60')][_0x2da6('0x4c')]();};_0xab342b[_0x2da6('0x60')]['onBROKEN']=function(){if(_0xab342b['reconnectTimeout']<=0x0){_0xab342b['reconnectTimeout']=_0x5be71c;}setTimeout(_0xab342b[_0x2da6('0x60')][_0x2da6('0x44')],_0xab342b['reconnectTimeout']);};_0xab342b[_0x2da6('0x6a')]=function(){if(_0xab342b[_0x2da6('0x3e')]){try{_0xab342b[_0x2da6('0x3e')]['close'](function(){_0x5728c4('connection\x20closed');});}catch(_0x3b020a){_0x5728c4(_0x3b020a);}}_0xab342b['client']=null;_0xab342b[_0x2da6('0x3e')]=new _0x1fc525();if(!_0xab342b[_0x2da6('0x99')]){_0xab342b[_0x2da6('0x99')]=_0x3e44b7;}if(!_0xab342b['reconnectTimeout']){_0xab342b['reconnectTimeout']=_0x5be71c;}if(_0xab342b[_0x2da6('0x30')]===_0x2da6('0x21')){if(!_0xab342b[_0x2da6('0x94')](_0xab342b[_0x2da6('0x50')])){_0xab342b[_0x2da6('0x9a')](_0x2da6('0x2b'),{'payload':_0xab342b[_0x2da6('0x50')]});_0xab342b[_0x2da6('0x60')][_0x2da6('0x7c')]();return;}switch(_0xab342b[_0x2da6('0x48')]){case _0x2da6('0x74'):_0xab342b[_0x2da6('0x3e')][_0x2da6('0x7b')](_0xab342b['tcpHost'],{'port':_0xab342b[_0x2da6('0xd')],'autoOpen':!![]})[_0x2da6('0xa')](_0xab342b['setTCPConnectionOptions'])[_0x2da6('0x5f')](_0xab342b[_0x2da6('0x57')]);break;default:_0xab342b[_0x2da6('0x3e')][_0x2da6('0x6d')](_0xab342b[_0x2da6('0x8d')],{'port':_0xab342b['tcpPort'],'autoOpen':!![]})[_0x2da6('0xa')](_0xab342b[_0x2da6('0x96')])[_0x2da6('0x5f')](_0xab342b[_0x2da6('0x57')]);}}else{if(!_0xab342b['checkUnitId'](_0xab342b[_0x2da6('0x50')])){_0xab342b['error'](_0x2da6('0x70'),{'payload':_0xab342b[_0x2da6('0x50')]});_0xab342b[_0x2da6('0x60')]['failure']();return;}if(!_0xab342b[_0x2da6('0x41')]){_0xab342b['serialConnectionDelay']=_0x5bebbf;}switch(_0xab342b[_0x2da6('0x33')]){case _0x2da6('0x4f'):_0xab342b[_0x2da6('0x3e')][_0x2da6('0x4b')](_0xab342b['serialPort'],{'baudRate':parseInt(_0xab342b['serialBaudrate'],0xa),'dataBits':parseInt(_0xab342b[_0x2da6('0x67')],0xa),'stopBits':parseInt(_0xab342b[_0x2da6('0x8a')],0xa),'parity':_0xab342b['serialParity'],'autoOpen':![]})[_0x2da6('0xa')](_0xab342b[_0x2da6('0x1')])['catch'](_0xab342b['modbusErrorHandling']);break;default:break;}}};_0xab342b['setTCPConnectionOptions']=function(){_0xab342b[_0x2da6('0x3e')]['setID'](_0xab342b[_0x2da6('0x50')]);_0xab342b[_0x2da6('0x3e')][_0x2da6('0x98')](_0xab342b[_0x2da6('0x99')]);_0xab342b['statlyMachine'][_0x2da6('0x14')]();};_0xab342b['setTCPConnected']=function(){_0x1700d0[_0x2da6('0x92')](_0x2da6('0x5')+_0xab342b[_0x2da6('0x8d')]);};_0xab342b['setSerialConnectionOptions']=function(){_0xab342b[_0x2da6('0x60')][_0x2da6('0x80')]();setTimeout(_0xab342b[_0x2da6('0x1c')],parseInt(_0xab342b[_0x2da6('0x41')],0xa));};_0xab342b['modbusErrorHandling']=function(_0x440420){_0x1700d0[_0x2da6('0x92')](JSON[_0x2da6('0x43')](_0x440420));_0x1700d0[_0x2da6('0x92')](_0x440420[_0x2da6('0x4')]);const _0x22a4a8=_0x440420['message'];if(_0x22a4a8['indexOf']('File\x20not\x20found')!==-0x1||_0x22a4a8[_0x2da6('0x34')]('connect\x20ECONNREFUSED')!==-0x1||_0x22a4a8[_0x2da6('0x34')]('EHOSTUNREACH')!==-0x1){_0xab342b[_0x2da6('0x60')][_0x2da6('0x35')]();_0xab342b['statlyMachine']['failure']();}if(_0x22a4a8['indexOf'](_0x2da6('0x39'))!==-0x1){_0xab342b[_0x2da6('0x2a')]('mberror',_0x2da6('0x90'));_0xab342b[_0x2da6('0x60')]['close']();_0xab342b['statlyMachine'][_0x2da6('0x7c')]();return;}if(_0x1700d0['networkErrors'][_0x2da6('0x51')](_0x440420[_0x2da6('0x69')])){_0xab342b[_0x2da6('0x60')][_0x2da6('0x35')]();_0xab342b[_0x2da6('0x60')][_0x2da6('0x7c')]();}};_0xab342b[_0x2da6('0x1c')]=function(){if(_0xab342b[_0x2da6('0x60')]['getMachineState']()===_0x2da6('0x56')){_0x5728c4(_0x2da6('0x5c')+_0xab342b[_0x2da6('0x50')]);_0x1700d0['modbusSerialDebug'](_0x2da6('0x5a'));_0xab342b['client'][_0x2da6('0x7e')](_0xab342b[_0x2da6('0x50')]);_0xab342b[_0x2da6('0x3e')]['setTimeout'](parseInt(_0xab342b[_0x2da6('0x99')],0xa));if(_0xab342b['client'][_0x2da6('0x17')]){_0xab342b[_0x2da6('0x3e')][_0x2da6('0x17')]['on'](_0x2da6('0x35'),_0xab342b['onModbusClose']);}_0xab342b[_0x2da6('0x60')][_0x2da6('0x14')]();}else{_0x5728c4(_0x2da6('0x75')+_0xab342b[_0x2da6('0x60')]['getMachineState']());_0x1700d0[_0x2da6('0x92')](_0x2da6('0x0'),_0xab342b[_0x2da6('0x60')][_0x2da6('0x20')]());_0xab342b[_0x2da6('0x60')]['failure']();}};_0xab342b[_0x2da6('0x40')]=function(){_0x5232b3(_0x2da6('0x9d'));_0x1700d0[_0x2da6('0x92')]('modbus\x20closed\x20port');_0xab342b[_0x2da6('0x60')][_0x2da6('0x35')]();};_0xab342b[_0x2da6('0x64')]=function(_0x3d3f04){const _0x1c1771=parseInt(_0x3d3f04[_0x2da6('0x2d')][_0x2da6('0x8')],0xa);if(Number[_0x2da6('0x19')](_0x1c1771)){return _0xab342b[_0x2da6('0x78')]['get'](_0x1c1771)[_0x2da6('0x77')];}else{return _0xab342b[_0x2da6('0x78')][_0x2da6('0x12')](_0xab342b[_0x2da6('0x50')])[_0x2da6('0x77')];}};_0xab342b['pushToQueueByUnitId']=function(_0x370476,_0x58bac1,_0x459c46,_0x569933){const _0x277862=parseInt(_0x58bac1[_0x2da6('0x2d')][_0x2da6('0x8')],0xa);if(Number[_0x2da6('0x19')](_0x277862)){_0x58bac1[_0x2da6('0x54')]=_0x277862;_0x459520(JSON[_0x2da6('0x43')]({'info':_0x2da6('0x42'),'message':_0x58bac1,'unit':_0x277862}));if(_0xab342b[_0x2da6('0x1b')][_0x2da6('0x34')](_0x277862)===-0x1){_0xab342b[_0x2da6('0x1b')][_0x2da6('0x23')](_0x277862);}_0xab342b[_0x2da6('0x78')]['get'](_0x277862)[_0x2da6('0x23')]({'callModbuskey':_0x370476,'message':_0x58bac1,'cbkey':_0x459c46,'cberrkey':_0x569933});}else{_0x58bac1[_0x2da6('0x54')]=_0xab342b[_0x2da6('0x50')];_0x459520(JSON[_0x2da6('0x43')]({'info':_0x2da6('0x72'),'message':_0x58bac1,'unit':_0xab342b[_0x2da6('0x50')]}));if(_0xab342b['unitSendingAllowed']['indexOf'](_0xab342b[_0x2da6('0x50')])===-0x1){_0xab342b[_0x2da6('0x1b')][_0x2da6('0x23')](_0xab342b[_0x2da6('0x50')]);}_0xab342b['bufferCommandList'][_0x2da6('0x12')](_0xab342b[_0x2da6('0x50')])[_0x2da6('0x23')]({'callModbuskey':_0x370476,'message':_0x58bac1,'cbkey':_0x459c46,'cberrkey':_0x569933});}};_0xab342b['on'](_0x2da6('0x3a'),function(_0x5b6dd0,_0x362258,_0x585243){const _0x27726b=_0xab342b['statlyMachine'][_0x2da6('0x20')]();if(_0xab342b[_0x2da6('0x25')][_0x2da6('0x34')](_0x27726b)===-0x1){_0x585243(_0x2da6('0x95'),_0x5b6dd0);return;}if(_0xab342b[_0x2da6('0x93')]==='1'){_0x5b6dd0[_0x2da6('0x76')]=_0xab342b[_0x2da6('0x64')](_0x5b6dd0);_0xab342b['pushToQueueByUnitId'](_0xab342b[_0x2da6('0x3a')],_0x5b6dd0,_0x362258,_0x585243);_0xab342b['statlyMachine'][_0x2da6('0x5e')]();_0x459520(JSON[_0x2da6('0x43')]({'info':_0x2da6('0x31'),'message':_0x5b6dd0,'state':_0x27726b,'queueLength':_0xab342b['bufferCommandList'][_0x2da6('0x12')](_0x5b6dd0['queueUnit'])[_0x2da6('0x77')]}));}else{_0xab342b[_0x2da6('0x3a')](_0x5b6dd0,_0x362258,_0x585243);}});_0xab342b[_0x2da6('0x3a')]=function(_0x369286,_0x1586ff,_0xa5c959){if(!_0xab342b['client']){return;}const _0x4075f2=!_0xab342b[_0x2da6('0x93')];if(_0x4075f2=='1'){_0xab342b[_0x2da6('0x60')][_0x2da6('0x53')]();}_0xab342b[_0x2da6('0x3e')][_0x2da6('0x98')](_0xab342b['clientTimeout']);_0x459520(JSON[_0x2da6('0x43')]({'info':_0x2da6('0x6b'),'message':_0x369286,'unitid':_0x369286[_0x2da6('0x49')],'timeout':_0xab342b[_0x2da6('0x3e')]['getTimeout'](),'state':_0xab342b['statlyMachine'][_0x2da6('0x20')]()}));switch(parseInt(_0x369286[_0x2da6('0x2d')]['fc'],0xa)){case 0x1:_0xab342b[_0x2da6('0x3e')][_0x2da6('0x6')](parseInt(_0x369286[_0x2da6('0x2d')][_0x2da6('0xf')],0xa),parseInt(_0x369286[_0x2da6('0x2d')][_0x2da6('0x8f')],0xa))['then'](function(_0x39c50b){_0xab342b['activateSending'](_0x369286);_0x1586ff(_0x39c50b,_0x369286);})[_0x2da6('0x5f')](function(_0x2101ca){_0xab342b[_0x2da6('0x88')](_0x369286);_0xa5c959(_0x2101ca,_0x369286);_0xab342b[_0x2da6('0x57')](_0x2101ca);});break;case 0x2:_0xab342b['client']['readDiscreteInputs'](parseInt(_0x369286[_0x2da6('0x2d')][_0x2da6('0xf')],0xa),parseInt(_0x369286[_0x2da6('0x2d')]['quantity'],0xa))[_0x2da6('0xa')](function(_0x4fe481){_0xab342b[_0x2da6('0x88')](_0x369286);_0x1586ff(_0x4fe481,_0x369286);})['catch'](function(_0x332794){_0xab342b[_0x2da6('0x88')](_0x369286);_0xa5c959(_0x332794,_0x369286);_0xab342b['modbusErrorHandling'](_0x332794);});break;case 0x3:_0xab342b['client'][_0x2da6('0x6c')](parseInt(_0x369286[_0x2da6('0x2d')][_0x2da6('0xf')],0xa),parseInt(_0x369286['payload'][_0x2da6('0x8f')],0xa))[_0x2da6('0xa')](function(_0x37f172){_0xab342b[_0x2da6('0x88')](_0x369286);_0x1586ff(_0x37f172,_0x369286);})[_0x2da6('0x5f')](function(_0x40d7b1){_0xab342b[_0x2da6('0x88')](_0x369286);_0xa5c959(_0x40d7b1,_0x369286);_0xab342b[_0x2da6('0x57')](_0x40d7b1);});break;case 0x4:_0xab342b['client']['readInputRegisters'](parseInt(_0x369286[_0x2da6('0x2d')][_0x2da6('0xf')],0xa),parseInt(_0x369286[_0x2da6('0x2d')][_0x2da6('0x8f')],0xa))[_0x2da6('0xa')](function(_0x1da6c6){_0xab342b[_0x2da6('0x88')](_0x369286);_0x1586ff(_0x1da6c6,_0x369286);})[_0x2da6('0x5f')](function(_0xb2f823){_0xab342b[_0x2da6('0x88')](_0x369286);_0xa5c959(_0xb2f823,_0x369286);_0xab342b[_0x2da6('0x57')](_0xb2f823);});break;default:_0xab342b['activateSending'](_0x369286);_0xa5c959(_0x2da6('0x2'),_0x369286);_0x1700d0[_0x2da6('0x92')](_0x2da6('0x9b'),JSON[_0x2da6('0x43')](_0x369286));break;}};_0xab342b['on']('writeModbus',function(_0x19c86f,_0x537539,_0x2abc43){const _0x8ad93=_0xab342b[_0x2da6('0x60')]['getMachineState']();if(_0xab342b['messageAllowedStates'][_0x2da6('0x34')](_0x8ad93)===-0x1){_0x2abc43('Device\x20Not\x20Ready\x20To\x20Write',_0x19c86f);return;}if(_0xab342b[_0x2da6('0x93')]==='1'){_0x19c86f['queueNumber']=_0xab342b[_0x2da6('0x64')](_0x19c86f);_0xab342b[_0x2da6('0x7')](_0xab342b[_0x2da6('0x1a')],_0x19c86f,_0x537539,_0x2abc43);_0xab342b[_0x2da6('0x60')][_0x2da6('0x5e')]();_0x459520(JSON[_0x2da6('0x43')]({'info':_0x2da6('0x24'),'message':_0x19c86f,'state':_0x8ad93,'queueLength':_0xab342b[_0x2da6('0x78')][_0x2da6('0x12')](_0x19c86f['queueUnit'])[_0x2da6('0x77')]}));}else{_0xab342b[_0x2da6('0x1a')](_0x19c86f,_0x537539,_0x2abc43);}});_0xab342b['writeModbus']=function(_0x30804f,_0x32cdb,_0x4302b0){if(!_0xab342b[_0x2da6('0x3e')]){return;}const _0x7618d=!_0xab342b[_0x2da6('0x93')];if(_0x7618d=='1'){_0xab342b[_0x2da6('0x60')]['write']();}_0xab342b[_0x2da6('0x3e')][_0x2da6('0x98')](_0xab342b[_0x2da6('0x99')]);_0x459520(JSON['stringify']({'info':_0x2da6('0x5b'),'message':_0x30804f,'unitid':_0x30804f[_0x2da6('0x49')],'timeout':_0xab342b['client'][_0x2da6('0x38')](),'state':_0xab342b[_0x2da6('0x60')][_0x2da6('0x20')]()}));switch(parseInt(_0x30804f[_0x2da6('0x2d')]['fc'],0xa)){case 0xf:if(parseInt(_0x30804f[_0x2da6('0x2d')][_0x2da6('0x37')]['length'],0xa)!==parseInt(_0x30804f[_0x2da6('0x2d')][_0x2da6('0x8f')],0xa)){_0xab342b[_0x2da6('0x88')](_0x30804f);_0x4302b0('Quantity\x20should\x20be\x20less\x20or\x20equal\x20to\x20coil\x20payload\x20array\x20length:\x20'+_0x30804f[_0x2da6('0x2d')][_0x2da6('0x37')][_0x2da6('0x77')]+_0x2da6('0x71')+_0x30804f[_0x2da6('0x2d')][_0x2da6('0xf')]+'\x20Q:\x20'+_0x30804f[_0x2da6('0x2d')][_0x2da6('0x8f')],_0x30804f);}else{_0xab342b['client'][_0x2da6('0x9')](parseInt(_0x30804f[_0x2da6('0x2d')][_0x2da6('0xf')],0xa),_0x30804f[_0x2da6('0x2d')][_0x2da6('0x37')])['then'](function(_0x301276){_0xab342b['activateSending'](_0x30804f);_0x32cdb(_0x301276,_0x30804f);})[_0x2da6('0x5f')](function(_0x303f9b){_0xab342b[_0x2da6('0x88')](_0x30804f);_0x4302b0(_0x303f9b,_0x30804f);_0xab342b[_0x2da6('0x57')](_0x303f9b);});}break;case 0x5:_0xab342b['client'][_0x2da6('0x61')](parseInt(_0x30804f['payload']['address'],0xa),_0x30804f[_0x2da6('0x2d')][_0x2da6('0x37')]===!![])[_0x2da6('0xa')](function(_0x1b4a7e){_0xab342b[_0x2da6('0x88')](_0x30804f);_0x32cdb(_0x1b4a7e,_0x30804f);})['catch'](function(_0x52121b){_0xab342b[_0x2da6('0x88')](_0x30804f);_0x4302b0(_0x52121b,_0x30804f);_0xab342b[_0x2da6('0x57')](_0x52121b);});break;case 0x10:if(parseInt(_0x30804f[_0x2da6('0x2d')][_0x2da6('0x37')][_0x2da6('0x77')],0xa)!==parseInt(_0x30804f[_0x2da6('0x2d')][_0x2da6('0x8f')],0xa)){_0xab342b['activateSending'](_0x30804f);_0x4302b0('Quantity\x20should\x20be\x20less\x20or\x20equal\x20to\x20register\x20payload\x20array\x20length:\x20'+_0x30804f['payload'][_0x2da6('0x37')][_0x2da6('0x77')]+_0x2da6('0x71')+_0x30804f[_0x2da6('0x2d')][_0x2da6('0xf')]+_0x2da6('0x83')+_0x30804f[_0x2da6('0x2d')][_0x2da6('0x8f')],_0x30804f);}else{_0xab342b[_0x2da6('0x3e')][_0x2da6('0x87')](parseInt(_0x30804f[_0x2da6('0x2d')][_0x2da6('0xf')],0xa),_0x30804f['payload'][_0x2da6('0x37')])[_0x2da6('0xa')](function(_0x3e70be){_0xab342b['activateSending'](_0x30804f);_0x32cdb(_0x3e70be,_0x30804f);})['catch'](function(_0x2b54ed){_0xab342b[_0x2da6('0x88')](_0x30804f);_0x4302b0(_0x2b54ed,_0x30804f);_0xab342b[_0x2da6('0x57')](_0x2b54ed);});}break;case 0x6:_0xab342b[_0x2da6('0x3e')]['writeRegister'](parseInt(_0x30804f[_0x2da6('0x2d')][_0x2da6('0xf')],0xa),parseInt(_0x30804f[_0x2da6('0x2d')][_0x2da6('0x37')],0xa))[_0x2da6('0xa')](function(_0x390941){_0xab342b[_0x2da6('0x88')](_0x30804f);_0x32cdb(_0x390941,_0x30804f);})[_0x2da6('0x5f')](function(_0x4a8871){_0xab342b[_0x2da6('0x88')](_0x30804f);_0x4302b0(_0x4a8871,_0x30804f);_0xab342b[_0x2da6('0x57')](_0x4a8871);});break;default:_0xab342b['activateSending'](_0x30804f);_0x4302b0('Function\x20Code\x20Unknown',_0x30804f);_0x1700d0[_0x2da6('0x92')](_0x2da6('0x9b'),JSON['stringify'](_0x30804f));break;}};_0xab342b[_0x2da6('0x88')]=function(_0x57c803){if(_0xab342b[_0x2da6('0x93')]==='1'){_0xab342b['sendAllowed'][_0x2da6('0x3b')](_0x57c803['queueUnit'],!![]);_0x459520(JSON[_0x2da6('0x43')]({'info':_0x2da6('0x79'),'message':_0x57c803,'queueLength':_0xab342b['bufferCommandList'][_0x2da6('0x77')]}));}_0xab342b[_0x2da6('0x60')][_0x2da6('0x1e')]();};_0x5728c4(_0x2da6('0x11'));_0xab342b[_0x2da6('0x8b')](_0x4affb6);_0xab342b[_0x2da6('0x60')]['init']();_0xab342b['on'](_0x2da6('0x16'),function(){_0xab342b['statlyMachine'][_0x2da6('0x7c')]()['close']();});_0xab342b['on'](_0x2da6('0x35'),function(_0x40ff44){_0xab342b[_0x2da6('0x60')]['failure']()['stop']();_0x5728c4('close\x20node');if(_0xab342b[_0x2da6('0x3e')]){_0xab342b[_0x2da6('0x3e')][_0x2da6('0x35')](function(){_0x5728c4(_0x2da6('0x46'));_0x40ff44();})[_0x2da6('0x5f')](function(_0x2f01d4){_0x5728c4(_0x2f01d4);_0x40ff44();});}else{_0x40ff44();}});}_0x26c7f7['nodes'][_0x2da6('0x15')](_0x2da6('0x55'),_0x5cf714);_0x26c7f7[_0x2da6('0xc')]['get']('/serialports_HHub',_0x26c7f7[_0x2da6('0x5d')][_0x2da6('0x2e')](_0x2da6('0x7f')),function(_0x5962fe,_0x353c4d){const _0x158544=require(_0x2da6('0x3d'));_0x158544[_0x2da6('0x3c')](function(_0x17fbbf,_0x1b3c0d){_0x353c4d[_0x2da6('0x28')](_0x1b3c0d);});});};