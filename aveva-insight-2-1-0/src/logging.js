const _0x45b9=['1294318eIumqr','constants','774047NVVEwl','mkdirSync','933UlIOdO','/aveva.log','335341OAlLXS','29eKKOpY','write','send','logWarning','readonly','warn','/.se_nrf_logs','199910QoxJSo','linux','log','793410CeRJLK','configure','data','logInfo','winston','error','info','format','263cjbFbA','/aveva1.log','user-service','YYYY-MM-DD\x20hh:mm:ss\x20A\x20ZZ','timestamp','chattr\x20-i\x20','File','chmodSync','No\x20write\x20permission\x20for\x20log\x20directory\x20or\x20log\x20file,\x20Please\x20provide\x20the\x20write\x20permission\x20for\x20this\x20folder','size','F_OK','loggingLevel','logError','logging','resolve','createLogger','json','access','exports','transports','3957cVcqFh','exec','path'];const _0x1f0a=function(_0x29edb1,_0x221b84){_0x29edb1=_0x29edb1-0xe3;let _0x45b92e=_0x45b9[_0x29edb1];return _0x45b92e;};const _0xa1c8dd=_0x1f0a;(function(_0x5ac31a,_0x4a1f4d){const _0x44c01f=_0x1f0a;while(!![]){try{const _0x1d958f=-parseInt(_0x44c01f(0xfa))+parseInt(_0x44c01f(0xe9))+-parseInt(_0x44c01f(0xf0))*-parseInt(_0x44c01f(0xed))+-parseInt(_0x44c01f(0xef))+-parseInt(_0x44c01f(0xe6))*-parseInt(_0x44c01f(0x102))+-parseInt(_0x44c01f(0xeb))+parseInt(_0x44c01f(0xf7));if(_0x1d958f===_0x4a1f4d)break;else _0x5ac31a['push'](_0x5ac31a['shift']());}catch(_0x524a27){_0x5ac31a['push'](_0x5ac31a['shift']());}}}(_0x45b9,0xa0eea));const fs=require('fs'),path=require(_0xa1c8dd(0xe8)),os=require('os'),exec=require('child_process')[_0xa1c8dd(0xe7)],winston=require(_0xa1c8dd(0xfe)),homedir=os['homedir']();let logger=null,prevFileSize=0x0;const logDir=path[_0xa1c8dd(0x110)](homedir+_0xa1c8dd(0xf6)),filePath=path[_0xa1c8dd(0x110)](logDir+_0xa1c8dd(0xee)),sh=async function(_0xfff2e3){return new Promise(function(_0x58984c,_0x225576){exec(_0xfff2e3,(_0x58e283,_0x4ebc3b)=>{_0x58e283?_0x225576(_0x58e283):_0x58984c(_0x4ebc3b);});});},isExists=function(_0x3f8be2,_0x439ee3){const _0x3eeb4f=_0xa1c8dd;fs[_0x3eeb4f(0xe3)](_0x3f8be2,fs['constants'][_0x3eeb4f(0x10c)],_0x4f0d0f=>{_0x4f0d0f?_0x439ee3(![]):_0x439ee3(!![]);});},isWritable=function(_0x21733d,_0x471f0e){const _0x2e3d2f=_0xa1c8dd;fs['access'](_0x21733d,fs['constants']['F_OK']|fs[_0x2e3d2f(0xea)]['W_OK'],_0x37c424=>{_0x37c424?_0x471f0e(![]):_0x471f0e(!![]);});},checkAndCreatedir=async function(_0xefb708){const _0xb0cca=_0xa1c8dd;if(!fs['existsSync'](_0xefb708))try{fs[_0xb0cca(0xec)](_0xefb708);}catch(_0x87181d){console['error'](_0x87181d['message']);}},permLinuxHelper=async function(_0x63ee9f,_0x5eea05){const _0x1cfb32=_0xa1c8dd;_0x5eea05==='readonly'?await sh('chattr\x20+i\x20'+_0x63ee9f):await sh(_0x1cfb32(0x107)+_0x63ee9f);},permWindowsHelper=async function(_0x1694bb,_0x302d83){const _0x43810b=_0xa1c8dd;_0x302d83===_0x43810b(0xf4)?fs[_0x43810b(0x109)](_0x1694bb,0x100):fs[_0x43810b(0x109)](_0x1694bb,0x180);},changePermissions=async function(_0x479704,_0x2321b7){isExists(_0x479704,async function(_0x4575c3){const _0x78324a=_0x1f0a;if(_0x4575c3)try{process['platform']===_0x78324a(0xf8)?await permLinuxHelper(_0x479704,_0x2321b7):await permWindowsHelper(_0x479704,_0x2321b7);}catch(_0x2d264c){setTimeout(changePermissions,0xc8,_0x479704,_0x2321b7);}else{}});},showErrorMessage=async function(_0x2652fb){const _0x106611=_0xa1c8dd,_0x5166bb={'payload':{'Error':_0x106611(0x10a)}};_0x2652fb[_0x106611(0xf2)](_0x5166bb);};module[_0xa1c8dd(0xe4)][_0xa1c8dd(0xfb)]=async function(_0x538d29,_0x41fca8){const _0x27975c=_0xa1c8dd;await checkAndCreatedir(logDir);let _0x449115=0x0;if(_0x41fca8==='kb')_0x449115=_0x538d29*0x400;else _0x41fca8==='mb'?_0x449115=_0x538d29*0x100000:_0x449115=0x100000;logger=winston[_0x27975c(0x111)]({'level':_0x27975c(0x100),'format':winston[_0x27975c(0x101)]['combine'](winston[_0x27975c(0x101)][_0x27975c(0x106)]({'format':_0x27975c(0x105)}),winston[_0x27975c(0x101)][_0x27975c(0x112)]()),'defaultMeta':{'service':_0x27975c(0x104)},'transports':[new winston[(_0x27975c(0xe5))][(_0x27975c(0x108))]({'filename':filePath,'maxsize':_0x449115,'maxFiles':0x2,'tailable':!![]})],'exitOnError':![]}),logger['on'](_0x27975c(0xfc),async function(){let _0x24d54c,_0x525072;isExists(filePath,async function(_0x462316){const _0x1b8aa2=_0x1f0a;try{if(_0x462316){_0x525072=filePath,_0x24d54c=_0x1b8aa2(0xf4);const _0x5d1098=fs['statSync'](filePath);await changePermissions(_0x525072,_0x24d54c),_0x5d1098['size']>=0x61a8*0x400&&(_0x24d54c=_0x1b8aa2(0xf1),_0x525072=path[_0x1b8aa2(0x110)](logDir+_0x1b8aa2(0x103)),await changePermissions(_0x525072,_0x24d54c)),_0x5d1098[_0x1b8aa2(0x10b)]<prevFileSize&&(_0x24d54c=_0x1b8aa2(0xf4),_0x525072=path[_0x1b8aa2(0x110)](logDir+'/aveva1.log'),await changePermissions(_0x525072,_0x24d54c)),prevFileSize=_0x5d1098[_0x1b8aa2(0x10b)];}else{}}catch(_0xddd81c){setTimeout(async function(){await changePermissions(_0x525072,_0x24d54c);},0xc8);}});}),logger['on'](_0x27975c(0xff),function(_0x63fb9f){const _0x2b52c0=_0x27975c;console[_0x2b52c0(0xff)](_0x63fb9f);});};const logIntoFile=async function(_0x1198c3,_0x44e411,_0x291f98){isWritable(logDir,async function(_0x34d763){_0x34d763?isWritable(filePath,async function(_0x3759c3){const _0x25136e=_0x1f0a;if(_0x3759c3)logger[_0x25136e(0xf9)](_0x291f98,_0x1198c3);else{}}):showErrorMessage(_0x44e411);});};module[_0xa1c8dd(0xe4)][_0xa1c8dd(0xfd)]=async function(_0x25ded9,_0x443510){const _0x1b6434=_0xa1c8dd;_0x443510[_0x1b6434(0x10f)]&&_0x443510[_0x1b6434(0x10d)]===_0x1b6434(0x100)&&(await changePermissions(filePath,_0x1b6434(0xf1)),await logIntoFile(_0x25ded9,_0x443510,_0x1b6434(0x100)));},module[_0xa1c8dd(0xe4)][_0xa1c8dd(0x10e)]=async function(_0x2cc9e0,_0x323148){const _0x574178=_0xa1c8dd;_0x323148['logging']&&(await changePermissions(filePath,'write'),await logIntoFile(_0x2cc9e0,_0x323148,_0x574178(0xff)));},module[_0xa1c8dd(0xe4)][_0xa1c8dd(0xf3)]=async function(_0x31874f,_0x2940e7){const _0x55998a=_0xa1c8dd;await changePermissions(filePath,_0x55998a(0xf1)),await logIntoFile(_0x31874f,_0x2940e7,_0x55998a(0xf5));};